<loader [hidden]="!showLoader"></loader>
<div class="row">
  <div class="col-lg-12">
    <div class="ibox float-e-margins">
      <div class="ibox-content">
        <div class="ibox float-e-margins">
          <div class="ibox-title">
            <div class="form-group">
              <div class="pull-left">
                <h2>
                  <strong>Pólizas</strong>
                </h2>
              </div>
            </div>
          </div>
        </div>
        <div class="form-row">
            <div class="col-md-2">
              <label for="name">Nombre del cliente</label>
              <input (keyup.enter)="searchPolicy()" [(ngModel)]="clientName" type="text" name="name" class="form-control">
            </div>
            <div class="col-md-2">
              <button class="btn btn-primary search" (click)="searchPolicy()">Buscar</button>
            </div>
          </div>
        <table class="table table-bordered table-condensed table-hover">
          <thead>
            <tr>
              <th hidden>PolicyID</th>
              <th style="width: 30%">Email</th>
              <th style="width: 30%">Monto</th>
              <th style="width: 30%">Fecha</th>
              <th style="width: 30%">Pago</th>
              <th hidden>ClientID</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let pol of policies">
              <td hidden>{{ pol.id }}</td>
              <td>{{ pol.email }}</td>
              <td>{{ pol.amountInsured }}</td>
              <td>{{ pol.inceptionDate }}</td>
              <td><i class="fa fa-lg" [ngClass]="{'fa-check status-active': pol.installmentPayment, 'fa-close status-inactive': !pol.installmentPayment}"></i></td>
              <td hidden>{{ pol.clientid }}</td>
              <td>
                <button (click)="ShowClient(pol.id);open(content)">
                  <i  class="fa fa-lg fa-user"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
        <div class="form-row">
            <label>Total de pólizas: {{totalPolicies}}</label>
          </div>
      </div>
    </div>
  </div>
  <ng-template #content let-c="close" let-d="dismiss">
      <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Cliente</h4>
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form>
            <div class="form-row">
                <div class="col-md-12">
                  <div class="form-row">
                      <label>Nombre</label>
                      <input type="text" [(ngModel)]="client.name" name="name" class="form-control" disabled>
                  </div>
                  <div class="form-row">
                      <label>Role</label>
                      <input type="text" [(ngModel)]="client.name" name="name" class="form-control" disabled>
                  </div>
                  <div class="form-row">
                      <label>Email</label>
                      <input type="text" [(ngModel)]="client.email" name="email" class="form-control" disabled>
                  </div>
                </div>
              </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="d('Cross click')">Cerrar</button>
      </div>
    </ng-template>